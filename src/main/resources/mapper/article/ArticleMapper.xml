<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper  namespace="com.jtfu.mapper.ArticleMapper">

   <!-- @Select("select a.id,title,auth,authId,money,describes,photos,createtime,status,moneynow,IFNULL(b.count,0) replyNum from article a\n" +
    "left join (select articleid,count(1) count from message GROUP BY articleid) b on a.id=b.articleid where a.status=1 or a.status=0 order by ${order} desc limit ${begin},${end} ")-->

    <select id="getArticleListPage" resultType="com.jtfu.entity.Article">
        select a.id,title,auth,authId,money,describes,photos,createtime,status,moneynow,IFNULL(b.count,0) replyNum from article a
        left join (select articleid,count(1) count from message GROUP BY articleid) b on a.id=b.articleid where a.status!=2 and a.status!=-1
        <if test="status != null">
            and a.status = ${status}
        </if>
        order by ${order} desc limit ${begin},${end}
    </select>

</mapper>
